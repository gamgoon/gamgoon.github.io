---
title: 러닝 HTTP/2 (Learning HTTP/2)
layout: post
categories: book
author: Gamgoon
cover: https://farm5.staticflickr.com/4716/25373610567_fa7517f6bc_k.jpg
---

HTTP 가 없는 웹을 생각할 수 있을까? 하지만 웹 어플리케이션을 개발하면서 HTTP 를 심각하게 고민하지는 않는다… 뭐랄까 그냥 당연히 있어야할 **공기** 같은 것이랄까?

그도 그럴것이 프로토콜 레벨의 구현은 이미 프레임워크나 라이브러리에서 다 해주고 있으니, 프로토콜 스펙 문서를 정독해가면서 개발하지는 않는다. 하지만 시간이 지나면서  HTTP 에 대해 제대로 몰라서 생기는 문제들이 생기고 자연스럽게 [HTTP 완벽 가이드](http://www.aladin.co.kr/shop/wproduct.aspx?ItemId=49731592) 요런 책도 읽어보게 된다. 	

HTTP/2 에 대한 글이나 기사는 봤지만, 개인적인 관심사의 우선순위나 낮다보니 거의 아는게 없었는데, 이 책을 읽을 기회가 생겼다.

우선 이책을 장점은

1. 200 페이지도 되지 않는 얇은 책이다. (참고로 앞서 언급한 [HTTP 완벽 가이드](http://www.aladin.co.kr/shop/wproduct.aspx?ItemId=49731592)  는 700 페이지가 넘는다.) 
2. HTTP2 의 새로운 기능만 단순히 설명하는 책이 아니다.
3. 관련 레퍼런스를 많이 소개해준다.

목차를 보면 알겠지만, 우선 HTTP 의 발전 과정을 간략히 정리해준다. 이어서 본격적으로 HTTP/2 에 대한 이야기에 앞서 HTTP/2가 나올 수 밖에 없었던 이유에 대해서 설명해 주는데, 개인적으로는 이 부분(3장)이 가장 마음에 들었다. 오래된 프로토콜의 문제점이 무엇이었는지, 그리고 그런 문제점들을 이겨내기위해 어떤 기법들이 사용되고 있었는지, 성능에 연관된 지표들은 어떤 것 들이 있는지 등. 막연하게 알고 있던 내용뿐만 아니라 처음 알게된 용어나 내용도 적지 않았다. 어찌보면 HTTP/2 의 새로운 기능보다 여기서 알게된 내용이 더 도움이 되는지도 모르겠다.

> 조금 불친절하게 말하자면, HTTP/2를 지원하기 위해 해야 할 모든 일은 h2로 통신하는 웹 서버로 업그레이드하거나 실제 웹사이트를 대신해 h2로 통신할 콘텐츠 전송 네트워크를 사용하는 것이다.  

사실 우리 서비스의 정정 리소스들은 CDN을 이용하고 있고, 당연히 HTTP/2를 지원하고 있으니 HTTP/2의 성능 개선 효과를 누리고 있다고 볼 수 있으려나?

> HTTP/2의 목표 중 하나는 성능 개선이다. 누군가에게는 성능이 h2로 전환해야 할 단 하나의 이유일 수도 있다. 웹 페이지를 전송하는 데는 h2가 HTTP/1.1 보다 일반적으로 더 빠르긴 하지만 항상 그런 것은 아니다.   

> h2의 성능을 측정할 때는 많은 변수를 교려해야 하며, 성능 평가는 단순히 ‘더 느린 것’과 ‘더 빠른 것’을 분류하는 것보다 더 복잡한 일이다.  

이후 HTTP/2 로의 전환에 앞서 고려해야할 사항들과, 지금까지 성능향상을 위해 사용한 방법들이 HTTP/2 에서는 오히려 마이너스 요인이 되는 기법들. 그리고 드디어 HTTP/2 프로토콜에 대해 자세히 알려준다. 모든 기술이 그렇듯이 덮어놓고 이게 가장 좋다고 말할 수 는 없다는 것이다. 물론 책에서도 말하고 있지만, 대부분의 경우에서 HTTP/2 가 더 나은 성능을 발휘하지만, 그 반대의 케이스도 있다는 것을 알고 있어야 한다는 것. 

> 이러한 급속한 변화의 근원과 그 이면의 개념을 이해하려면, HTTP의 토대가 되는 스택stack에 대한 배경 지식을 갖는 것이 중요하다.  

마지막 장으로 HTTP/2 그 다음은 무엇일지 이야기한다. 짧은 내용이지만 내용이 흥미로웠다. OS 의 커널에 구현되었기에 변경하기 어려운 특징을 가진 TCP 와 UDP을 기반으로 TCP 스택을 사용자 공간(브라우저) 옮기므로써(TCP스택의 구현) 개발자가 네트워크 스택에 대한 제어권을 얻게 되어 더 빠른 개발과 배포를 할 수 있기에 TCP 에서 UDP로의 전환에 대해 언급한다. 그리고 구글이 개발한 QUIC(Quick UDP Internet Connection) 을 간단히 소개한다. 

얇은 책 두께에 비해 내용은 반대로 아주 알찬 책임이 틀림없다. 웹 관련 개발자라면 누구나 꼭 읽어볼 만한 책이라고 추천해주고 싶다.

![책표지](https://farm5.staticflickr.com/4716/25373610567_fa7517f6bc_k.jpg)

참고

* [RFC 7540 (http://httpwg.org/)](http://httpwg.org/specs/rfc7540.html), [RFC 7540](https://tools.ietf.org/html/rfc7540)
* [High Performance Browser Networking (O’Reilly)](https://hpbn.co/)
* [draft-hamilton-early-deployment-quic-00 - QUIC: A UDP-Based Secure and Reliable Transport for HTTP/2](https://tools.ietf.org/html/draft-hamilton-early-deployment-quic-00)
